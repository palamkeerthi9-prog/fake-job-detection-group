<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Comparison - JobCheck AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .sidebar-gradient {
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
        }
        .progress-bar {
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased">

    <div class="flex h-screen overflow-hidden">
        
        <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black opacity-0 lg:opacity-0 pointer-events-none transition-opacity duration-300 z-10"></div>

        <aside id="sidebar" class="fixed inset-y-0 left-0 w-64 sidebar-gradient text-white flex flex-col shadow-2xl transition-all duration-300 z-20 transform -translate-x-full lg:relative lg:translate-x-0">
            <div class="h-20 flex items-center px-8 border-b border-slate-700/50">
                <h1 class="text-xl font-bold tracking-wider flex items-center">
                    <i class="fas fa-shield-alt text-blue-400 mr-3"></i> 
                    <span>JobCheck<span class="text-blue-400">AI</span></span>
                </h1>
                <button onclick="toggleSidebar()" class="lg:hidden ml-auto p-2 text-slate-400 hover:text-white transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
                <div class="px-4 py-2 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Main Menu</div>
                
                <a href="/admin_dashboard" class="flex items-center px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800/50 hover:text-white transition-all group">
                    <i class="fas fa-chart-pie w-6 group-hover:text-blue-400 transition-colors"></i> <span class="font-medium ml-3">Dashboard</span>
                </a>
                
                <a href="/model_comparison" class="flex items-center px-4 py-3 rounded-xl bg-blue-600 shadow-lg shadow-blue-900/20 text-white transition-all transform hover:scale-[1.02]">
                    <i class="fas fa-balance-scale w-6"></i> <span class="font-medium ml-3">Model Comparison</span>
                </a>

                <a href="/admin_history" class="flex items-center px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800/50 hover:text-white transition-all group">
                    <i class="fas fa-history w-6 group-hover:text-purple-400 transition-colors"></i> <span class="font-medium ml-3">History Logs</span>
                </a>
                
                <div class="px-4 py-2 text-xs font-semibold text-slate-400 uppercase tracking-wider mt-6 mb-2">System</div>

                <a href="/training_logs" class="flex items-center px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800/50 hover:text-white transition-all group">
                    <i class="fas fa-cogs w-6 group-hover:text-green-400 transition-colors"></i> <span class="font-medium ml-3">Training Logs</span>
                </a>
                <a href="/export_data" class="flex items-center px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800/50 hover:text-white transition-all group">
                    <i class="fas fa-file-download w-6 group-hover:text-yellow-400 transition-colors"></i> <span class="font-medium ml-3">Export Data</span>
                </a>
            </nav>

            <div class="p-4 border-t border-slate-700/50 bg-slate-900/50">
                <a href="/logout" class="flex items-center px-4 py-2 rounded-lg text-red-400 hover:bg-red-500/10 hover:text-red-300 transition text-sm font-medium">
                    <i class="fas fa-sign-out-alt w-5"></i> Logout
                </a>
            </div>
        </aside>

        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-slate-50 p-4 md:p-8">

            <div class="lg:hidden flex items-center justify-start mb-6">
                <button onclick="toggleSidebar()" class="text-slate-600 hover:text-slate-900 focus:outline-none p-2 rounded-lg bg-white shadow-sm border border-slate-200">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
            
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 md:mb-10">
                <div>
                    <h2 class="text-2xl md:text-3xl font-bold text-slate-800 tracking-tight">Model Performance</h2>
                    <p class="text-slate-500 mt-2 font-medium text-sm md:text-base">Detailed comparison between the previous and newly trained model.</p>
                </div>
                <a href="/admin_dashboard" class="flex items-center text-slate-500 hover:text-blue-600 font-semibold transition bg-white px-4 py-2 rounded-lg border border-slate-200 shadow-sm hover:shadow-md mt-4 md:mt-0 text-sm">
                    <i class="fas fa-arrow-left mr-2"></i> Dashboard
                </a>
            </div>

            <div class="bg-white p-4 md:p-8 rounded-3xl shadow-sm border border-slate-100 max-w-5xl mx-auto">
                
                <div class="flex items-center justify-center text-center mb-8">
                    {% if imp|float >= 0 %}
                        <div class="bg-green-50 text-green-700 px-4 md:px-8 py-2 md:py-3 rounded-2xl font-bold flex items-center shadow-sm border border-green-100 text-sm md:text-base">
                            <i class="fas fa-check-circle mr-3 text-lg"></i> 
                            <span>Retraining Successful & Performance Improved</span>
                        </div>
                    {% else %}
                        <div class="bg-red-50 text-red-700 px-4 md:px-8 py-2 md:py-3 rounded-2xl font-bold flex items-center shadow-sm border border-red-100 text-sm md:text-base">
                            <i class="fas fa-exclamation-circle mr-3 text-lg"></i> 
                            <span>Warning: Performance Degraded</span>
                        </div>
                    {% endif %}
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 mb-8 md:mb-10">
                    
                    <div class="p-6 md:p-8 bg-slate-50 rounded-2xl border border-slate-200 relative overflow-hidden group hover:border-slate-300 transition-colors">
                        <span class="absolute top-4 right-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-white px-2 py-1 rounded shadow-sm">Previous Version</span>
                        
                        <div class="flex items-center mb-4 md:mb-6">
                            <div class="p-3 bg-white rounded-xl text-slate-500 mr-4 shadow-sm border border-slate-100">
                                <i class="fas fa-history text-xl"></i>
                            </div>
                            <h3 class="text-lg font-bold text-slate-700">Old Model</h3>
                        </div>
                        
                        <div class="flex justify-between items-end mb-3">
                            <span class="text-4xl md:text-5xl font-black text-slate-800 tracking-tight">{{ old }}%</span>
                            <span class="text-xs font-bold text-slate-400 uppercase mb-1.5">Accuracy Score</span>
                        </div>

                        <div class="w-full bg-slate-200 rounded-full h-2.5 overflow-hidden">
                            <div class="bg-slate-500 h-2.5 rounded-full progress-bar" style="width: 0%" data-width="{{ old }}%"></div>
                        </div>
                    </div>

                    <div class="p-6 md:p-8 bg-blue-50 rounded-2xl border border-blue-100 relative overflow-hidden shadow-sm group hover:border-blue-200 transition-colors">
                        <div class="absolute top-0 right-0 bg-blue-600 text-white text-[10px] font-bold px-4 py-1.5 rounded-bl-xl uppercase tracking-wider shadow-md">Latest Version</div>
                        
                        <div class="flex items-center mb-4 md:mb-6">
                            <div class="p-3 bg-white rounded-xl text-blue-600 mr-4 shadow-sm border border-blue-100">
                                <i class="fas fa-robot text-xl"></i>
                            </div>
                            <h3 class="text-lg font-bold text-blue-800">New Model</h3>
                        </div>
                        
                        <div class="flex justify-between items-end mb-3">
                            <span class="text-4xl md:text-5xl font-black text-blue-900 tracking-tight">{{ new }}%</span>
                            <span class="text-xs font-bold text-blue-400 uppercase mb-1.5">Accuracy Score</span>
                        </div>

                        <div class="w-full bg-blue-200 rounded-full h-2.5 overflow-hidden">
                            <div class="bg-blue-600 h-2.5 rounded-full progress-bar shadow-lg shadow-blue-500/30" style="width: 0%" data-width="{{ new }}%"></div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col md:flex-row justify-between items-center p-6 md:p-8 rounded-2xl border text-center transition-all duration-300
                    {{ 'bg-green-50/50 border-green-200' if imp|float >= 0 else 'bg-red-50/50 border-red-200' }}">
                    
                    <div class="flex flex-col md:flex-row items-center mb-4 md:mb-0">
                        <div class="p-3 md:p-4 rounded-full {{ 'bg-green-100 text-green-600' if imp|float >= 0 else 'bg-red-100 text-red-600' }} mr-0 md:mr-6 shadow-sm mb-3 md:mb-0">
                            <i class="fas {{ 'fa-arrow-up' if imp|float >= 0 else 'fa-arrow-down' }} text-2xl"></i>
                        </div>
                        <div class="text-center md:text-left">
                            <h4 class="text-lg font-bold {{ 'text-green-900' if imp|float >= 0 else 'text-red-900' }}">Performance Change</h4>
                            <p class="text-sm {{ 'text-green-700' if imp|float >= 0 else 'text-red-700' }} mt-1 font-medium">
                                {{ 'Model accuracy has significantly improved.' if imp|float >= 0 else 'Model accuracy has dropped.' }}
                            </p>
                        </div>
                    </div>
                    
                    <span class="text-5xl font-black tracking-tighter {{ 'text-green-600' if imp|float >= 0 else 'text-red-600' }}">
                        {{ '+' if imp|float >= 0 else '' }}{{ imp }}%
                    </span>
                </div>

                {% if imp|float < 0 %}
                <div class="mt-6 md:mt-8 bg-white border-l-4 border-red-500 p-4 md:p-6 rounded-r-xl shadow-sm border border-slate-100 flex items-start">
                    <i class="fas fa-exclamation-triangle text-red-500 text-xl mr-4 mt-1"></i>
                    <div>
                        <p class="font-bold text-slate-800 text-base">Recommendation</p>
                        <p class="text-sm text-slate-600 mt-1">The new model performed worse than the previous one. This usually happens if the new dataset has too much noise or inconsistent patterns. Consider reverting to the previous model or cleaning the dataset.</p>
                    </div>
                </div>
                {% endif %}

            </div>
        </main>
    </div>

    <script>
        // TOGGLE SIDEBAR LOGIC
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const isHidden = sidebar.classList.contains('-translate-x-full');

            if (isHidden) {
                // Show sidebar
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('opacity-0', 'pointer-events-none');
                overlay.classList.add('opacity-50', 'pointer-events-auto');
            } else {
                // Hide sidebar
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('opacity-0', 'pointer-events-none');
                overlay.classList.remove('opacity-50', 'pointer-events-auto');
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            const bars = document.querySelectorAll('.progress-bar');
            // Slight delay to allow UI to render before animating
            setTimeout(() => {
                bars.forEach(bar => {
                    bar.style.width = bar.getAttribute('data-width');
                });
            }, 300);
        });
    </script>

</body>
</html>